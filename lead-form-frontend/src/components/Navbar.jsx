import React, { useState, useEffect } from 'react'
import Ellipse7 from '../assets/Ellipse 7.svg'
import GradientImage from '../assets/navbarEllipse-background.svg';

const Navbar = () => {
  const [isScrolled, setIsScrolled] = useState(false)
  const [isMenuOpen, setIsMenuOpen] = useState(false)

  // Handle scroll effect
  useEffect(() => {
    const handleScroll = () => {
      setIsScrolled(window.scrollY > 50)
    }
    window.addEventListener('scroll', handleScroll)
    return () => window.removeEventListener('scroll', handleScroll)
  }, [])

  // Smooth scroll to section
  const scrollToSection = (sectionId) => {
    let target = document.getElementById(sectionId)
    const nodes = Array.from(document.querySelectorAll(`#${sectionId}`))
    const visible = nodes.find((el) => {
      const style = window.getComputedStyle(el)
      return style.display !== 'none' && style.visibility !== 'hidden'
    })
    if (visible) target = visible
    if (!target) return

    const isMobile = window.innerWidth < 640 // Tailwind sm breakpoint
    // Always center Features section (all viewports) instead of default top alignment
    if (sectionId === 'features') {
      // Desktop-only: add some top padding the first time user opens Features via navbar
      const isDesktopMdUp = window.innerWidth >= 768; // Tailwind md breakpoint
      if (isDesktopMdUp) {
        if (target) {
          // Increase padding (was 100px). Using a data guard so we only set once unless we want to upgrade.
          const desiredPad = 160; // px
            // If never applied or previously smaller, set / upgrade it
          const currentApplied = parseInt(target.dataset.extraPadValue || '0', 10);
          if (currentApplied < desiredPad) {
            target.style.paddingTop = desiredPad + 'px';
            target.dataset.extraPadApplied = 'true';
            target.dataset.extraPadValue = String(desiredPad);
          }
        }
      }
      // Recompute rect after potential padding change
      const rect = target.getBoundingClientRect()
      const absoluteY = window.pageYOffset + rect.top
      // Center the midpoint of the section vertically first
      let y = absoluteY + rect.height / 2 - window.innerHeight / 2
      // Shift upward slightly so more of the top content is visible ("a little bit higher")
      const OFFSET = Math.min(120, Math.max(40, Math.round(window.innerHeight * 0.08))) // between 40px and 120px
      y -= OFFSET
      const maxY = Math.max(0, document.documentElement.scrollHeight - window.innerHeight)
      y = Math.max(0, Math.min(y, maxY))
      window.scrollTo({ top: y, behavior: 'smooth' })
    } else {
      // Default behavior for other sections
      try {
        target.scrollIntoView({ behavior: 'smooth', block: 'start' })
      } catch (_) {
        target.scrollIntoView()
      }
    }

    try {
      if (window.location.hash !== `#${sectionId}`) {
        history.replaceState(null, '', `#${sectionId}`)
      }
    } catch (_) {}
  }

  // Handle join now button click
  const handleJoinNow = () => {
    scrollToSection('waitlist')
    setIsMenuOpen(false)
  }

  // Lock body scroll when mobile menu is open
  useEffect(() => {
    if (isMenuOpen) {
      document.body.style.overflow = 'hidden'
    } else {
      document.body.style.overflow = ''
    }
    return () => { document.body.style.overflow = '' }
  }, [isMenuOpen])

  return (
    <>
      {/* Top cover: navbar + upper ellipse area (all views) */}
      <img
        src={GradientImage}
        alt=""
        aria-hidden
        className="pointer-events-none"
        style={{
          position: 'absolute',
          top: 0,
          left: 0,
          width: '100%',
          height: 'calc(clamp(200px, 45vw, 300px) - 85px)',
          zIndex: 49, // just under header (z-50), above ellipse (z~45)
          objectFit: 'cover',
          objectPosition: 'top center',
          mixBlendMode: 'screen',
          maskImage: 'linear-gradient(to bottom, rgba(0,0,0,1) 0%, rgba(0,0,0,1) 60%, rgba(0,0,0,0) 100%)',
          WebkitMaskImage: 'linear-gradient(to bottom, rgba(0,0,0,1) 0%, rgba(0,0,0,1) 60%, rgba(0,0,0,0) 100%)',
        }}
      />

      <header 
        className={`
          relative top-0 left-0 w-full z-50 transition-all duration-300 ease-in-out
          ${isScrolled 
            ? 'bg-transparent shadow-lg' 
            : 'bg-transparent'
          }
        `}
      >
  <div className="flex items-center pl-0 pr-0 md:pr-8 py-3 xxs:py-3.5 md:py-4 w-full">
          {/* Logo - Left aligned (nudged a bit more right) */}
          <div className="flex items-center flex-shrink-0 ml-1 xs:ml-2 sm:ml-2">
            <div
              className="cursor-pointer hover:opacity-80 transition-opacity"
              onClick={() => window.scrollTo({ top: 0, behavior: 'smooth' })}
              style={{ marginLeft: '16px' }} // tighter on mobile; desktop adjusted below
            >
              {/* Mobile logo (sm:hidden) */}
              <div className="flex items-center sm:hidden">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="138"
                  height="32"
                  viewBox="0 0 138 32"
                  fill="none"
                  role="img"
                  aria-label="tandem logo"
                  className="w-[130px] h-7 xxs:w-[137.591px] xxs:h-8 shrink-0"
                  style={{ aspectRatio: '137.59 / 32' }}
                >
                  <path d="M106.158 26.746C105.688 26.8963 105.167 26.9279 104.645 26.9596C100.043 27.2568 95.657 28.0021 91.1908 29.1812C88.2301 29.719 85.6288 30.5719 82.6125 30.8232C81.8726 30.8957 81.0702 30.9767 80.3854 30.7623C77.7696 30.2908 76.4328 27.45 77.5342 25.09C79.1465 21.7461 84.3384 20.0003 87.6763 18.9562L87.6797 18.9612C89.1689 18.4523 90.7568 17.9067 92.3104 17.5065C92.3792 17.4857 92.4799 17.4656 92.5748 17.4344C92.6254 17.4178 92.6739 17.3981 92.7153 17.3735C92.809 17.328 92.828 17.2709 92.828 17.232C92.8318 17.2127 92.8318 17.1919 92.8276 17.1691C92.8019 17.0881 92.7062 17.0897 92.6366 17.0901C89.7194 17.4294 86.7524 17.3692 83.8257 17.1641C81.844 17.06 81.3255 14.3496 82.976 13.3953C85.6097 12.1445 94.1366 9.30068 98.2579 7.77658V7.76927L100.681 7.01395C101.027 6.90598 101.394 7.103 101.498 7.45234L102.222 9.89215C102.328 10.2461 102.122 10.6182 101.769 10.7145C98.7507 11.4579 95.8344 12.5297 92.9089 13.5707C92.8604 13.6016 92.7398 13.6371 92.5939 13.6775C92.5939 13.6775 92.5926 13.6783 92.5918 13.6783C92.4326 13.7404 92.2714 13.7959 92.1135 13.8402C92.1135 13.8402 91.9978 13.8819 91.9866 13.9945C91.9866 13.9945 91.9315 14.1984 92.2747 14.2354C92.2747 14.2354 92.2776 14.2362 92.283 14.2373L92.2842 14.2378C92.4902 14.2513 92.6983 14.2582 92.9006 14.2817C94.0516 14.4271 95.2056 14.6719 96.3686 14.6896C97.4036 14.8084 100.132 15.1245 100.917 15.3061C101.772 15.5243 102.261 16.1316 102.275 17.0053C102.29 17.9487 101.58 18.7561 100.657 18.8498C99.4715 18.9701 98.3109 19.1679 97.1587 19.4732C95.8339 19.8457 94.5167 20.2447 93.2106 20.6781C91.2447 21.3297 89.3036 22.0591 87.4057 22.8923C85.4928 23.7321 83.6446 24.6837 81.8544 25.7624C81.7997 25.7956 81.7446 25.8284 81.6903 25.8623C81.6306 25.9244 81.5609 25.9768 81.4975 26.0342C81.4291 26.0959 81.3218 26.2 81.3744 26.3037C81.3744 26.3037 81.4212 26.4495 81.6438 26.3353C81.6438 26.3353 81.9112 26.2363 82.1039 26.1765H82.1043C82.7762 25.8815 83.4697 25.639 84.1822 25.4632C91.0806 23.7078 97.5458 22.2388 104.903 21.8509C107.947 21.5784 109.222 25.6714 106.158 26.746Z" fill="white"/>
                  <path d="M64.7889 31.4235C61.8725 31.4235 59.5746 30.4311 57.8752 28.4656C56.1563 26.5 55.3065 23.9896 55.3065 20.9345C55.21 15.0574 58.8795 10.3868 64.7118 10.4454C66.7391 10.4454 68.4969 10.9512 69.9837 11.9633C71.4046 12.943 72.4279 14.2331 73.0348 15.8336C73.0708 15.928 73.1599 15.9916 73.2602 15.9916C73.3916 15.9916 73.4986 15.8841 73.4986 15.7514V9.68621C73.4986 7.44848 73.3543 5.48674 73.0779 3.7768C73.012 3.36888 73.3195 2.99219 73.7299 2.99219H78.5972C79.0072 2.99219 79.3151 3.36926 79.2492 3.7768C78.9728 5.48712 78.8285 7.44848 78.8285 9.68621V24.2036C78.8285 26.4414 78.9728 28.4031 79.2492 30.1134C79.3151 30.5214 79.0072 30.898 78.5972 30.898H73.8115C73.3755 30.898 73.0629 30.4755 73.1603 30.0475C73.3829 29.0709 73.4986 28.0734 73.4986 27.0644V26.1445C73.4986 25.9968 73.3796 25.8773 73.2333 25.8773C73.1255 25.8773 73.0281 25.9436 72.9858 26.0443C72.3434 27.5657 71.3246 28.8334 69.9646 29.8474C68.535 30.8984 66.8161 31.4235 64.7889 31.4235ZM67.0097 27.2784C68.8057 27.2784 70.3314 26.6168 71.5675 25.3129C72.8031 24.0089 73.0542 22.5496 73.0542 20.9341C73.0542 19.1243 72.8225 17.626 71.606 16.3999C70.3891 15.1935 68.8637 14.5901 67.0097 14.5901C65.0591 14.5901 63.4563 15.1739 62.2008 16.361C60.9453 17.5481 60.3277 19.0853 60.3277 20.9341C60.3277 22.7828 60.9453 24.3007 62.2008 25.4879C63.4563 26.675 65.0591 27.2784 67.0097 27.2784Z" fill="white"/>
                  <path d="M19.837 31.425C17.2685 31.425 15.2406 30.7827 13.7729 29.4984C12.3051 28.2334 11.5713 26.5986 11.5713 24.5945C11.5713 22.5904 12.3051 20.9552 13.7924 19.6906C15.2601 18.4256 17.288 17.7836 19.8757 17.7836C21.749 17.7836 23.3517 18.173 24.6844 18.9318C25.9336 19.654 26.8159 20.5346 27.3145 21.5737C27.3608 21.6704 27.4568 21.7344 27.5636 21.7344C27.712 21.7344 27.8322 21.6134 27.8322 21.4638V18.9515C27.8322 15.468 25.4182 13.7168 21.2274 13.7168C19.7597 13.7168 18.3115 13.9115 16.9016 14.2812C16.1933 14.4767 15.5926 14.6772 15.099 14.8823C14.6013 15.0893 13.947 14.7277 13.947 14.1852V12.2559C13.947 11.9864 14.11 11.7427 14.3633 11.6568C15.1714 11.3822 16.2714 11.122 17.6744 10.8752C19.3354 10.5833 20.8804 10.4473 22.29 10.4473C25.3218 10.4473 27.7362 10.9338 29.7636 12.0431C31.772 13.1523 32.9309 15.2151 32.9309 18.0173V24.517C32.9309 26.2686 32.9696 27.6111 33.066 28.526C33.1112 29.0612 33.1827 29.5562 33.2811 30.0073C33.3771 30.4496 33.0583 30.8999 32.6088 30.8999H28.39C27.9091 30.8999 27.5705 30.3786 27.6654 29.9036C27.7779 29.3399 27.8322 28.6602 27.8322 27.864V27.7372C27.8322 27.6138 27.7331 27.5136 27.6103 27.5136C27.5223 27.5136 27.4427 27.5663 27.4052 27.6466C26.3564 29.8901 23.6816 31.425 19.837 31.425ZM20.875 28.0776C24.3707 28.0776 26.5722 26.7544 26.5722 24.5552C26.5722 23.6599 26.0316 22.8425 24.9694 22.1227C23.9073 21.4025 22.536 21.0524 20.8754 21.0524C17.5286 21.0524 16.786 22.3853 16.4612 24.2537C16.455 24.2899 16.4516 24.3273 16.452 24.3643C16.4543 25.3328 16.5228 25.7234 17.1097 26.87C17.1353 26.9202 17.1675 26.9672 17.2061 27.0077C17.9503 27.778 19.2382 28.0776 20.875 28.0776Z" fill="white"/>
                  <path d="M39.65 30.0201C39.7326 30.4596 39.4105 30.8999 38.9666 30.8999H34.8462C34.4357 30.8999 34.1276 30.5221 34.1938 30.1134C34.4311 28.6471 34.555 27.0435 34.555 25.3147L34.482 17.0245C34.482 15.0273 34.3576 13.268 34.1189 11.7589C34.0546 11.3502 34.3626 10.9724 34.7731 10.9724H38.8832C39.3492 10.9724 39.6725 11.4555 39.5612 11.9112C39.3615 12.7286 39.2586 13.7195 39.2586 14.8842V15.8192C39.2586 15.9368 39.3531 16.0324 39.4698 16.0324C39.5604 16.0324 39.6412 15.9731 39.6714 15.8867C40.8847 12.3974 43.3745 10.4473 46.925 10.4473C49.3995 10.4473 51.3377 11.206 52.7051 12.7436C54.0725 14.2809 54.7473 16.4801 54.7473 19.302V24.5953C54.7473 26.7436 54.872 28.5831 55.1108 30.1137C55.1746 30.5224 54.8666 30.9003 54.4563 30.9003H50.2326C49.8202 30.9003 49.5118 30.5194 49.5806 30.1099C49.8442 28.5415 49.9707 26.8612 49.9707 25.0819V20.5866C49.9707 16.8699 48.1017 14.8071 44.9694 14.8071C43.3599 14.8071 41.9925 15.4495 40.9023 16.7338C39.8122 18.0377 39.3313 19.497 39.3313 21.1318V25.1212C39.3313 27.2433 39.4349 28.8765 39.65 30.0208V30.0201Z" fill="white"/>
                  <path d="M110.461 28.9745C110.536 29.4082 110.216 29.8362 109.779 29.8362H106.098C105.691 29.8362 105.384 29.4653 105.444 29.0605C105.663 27.5911 105.778 25.9841 105.778 24.251V15.9608C105.778 13.959 105.663 12.1962 105.443 10.6845C105.384 10.2792 105.691 9.90833 106.098 9.90833H109.771C110.229 9.90833 110.55 10.3748 110.448 10.824C110.261 11.6457 110.165 12.6442 110.165 13.8198V14.7748C110.165 14.8816 110.25 14.968 110.357 14.968C110.441 14.968 110.515 14.9113 110.541 14.8303C111.681 11.205 113.86 9.38281 117.047 9.38281C120.233 9.38281 122.475 11.2019 123.324 14.8207C123.343 14.9059 123.419 14.968 123.506 14.968C123.587 14.968 123.66 14.9136 123.684 14.835C124.786 11.3565 127.229 9.38281 130.541 9.38281C134.991 9.38281 137.249 12.6327 137.249 18.2371V23.5304C137.249 25.6838 137.364 27.5267 137.584 29.0597C137.643 29.4649 137.335 29.8358 136.929 29.8358H133.154C132.747 29.8358 132.439 29.4623 132.502 29.0562C132.745 27.4847 132.862 25.801 132.862 24.0174V19.5222C132.862 15.8829 131.479 13.7423 128.697 13.7423C127.299 13.7423 126.123 14.365 125.185 15.6103C124.231 16.8754 123.738 18.2957 123.707 19.8723V23.8227C123.707 25.6607 123.826 27.411 124.055 29.074C124.109 29.4746 123.804 29.8362 123.403 29.8362H119.754C119.351 29.8362 119.045 29.473 119.092 29.0709C119.244 27.7785 119.32 26.0905 119.32 24.0178V19.5226C119.32 15.8833 117.937 13.7427 115.156 13.7427C112.168 13.7037 110.085 16.9733 110.165 20.0674V24.0567C110.165 26.1904 110.261 27.829 110.461 28.9745Z" fill="white"/>
                  <path d="M8.39218 26.009C8.32408 19.8442 10.8565 12.3094 12.1311 9.3125H9.96414L6.40527 21.2415V30.0202L12.2897 31.1369C13.2885 30.9557 13.3551 28.0252 13.2635 26.5826L12.9446 26.7141C9.65866 28.7481 8.54053 27.0915 8.39218 26.009Z" fill="white"/>
                  <path d="M11.7785 1.21078e-06C13.0584 -0.00215775 12.4545 2.88345 12.045 4.68774C12.8151 4.41186 13.5832 4.14342 14.3665 3.87534C15.1732 3.61838 15.9798 3.31848 16.739 3.06161C17.3084 2.84767 17.9258 2.67621 18.5906 2.71753C19.7302 2.75811 20.6816 3.60795 20.7311 4.67216C20.78 5.4809 20.2114 6.29107 19.31 6.67591C17.1748 7.53148 15.0393 8.25932 12.9039 9.02972C12.4294 9.20089 12.0024 9.41478 11.5278 9.54338C11.3381 9.62888 11.2434 9.75669 11.1962 9.92701C10.76 11.2388 10.352 12.5508 9.99367 13.8626C7.8539 20.3801 5.73382 29.3702 10.4065 28.4384C10.5713 28.4256 10.7354 28.4064 10.8978 28.3796C11.4022 28.368 12.5379 27.8425 12.8896 27.6673C12.9916 27.7855 12.9385 28.0762 12.9412 28.224C12.9509 28.8616 12.8895 29.4982 12.8092 30.1315L12.8072 30.1474C12.7783 30.3797 12.7429 30.6581 12.6126 30.8767L12.5973 30.8844C9.82132 32.2202 7.58041 31.9755 6.13852 31.4669C5.13985 31.1145 4.38784 30.2717 4.16472 29.2297C3.67565 26.9445 4.02968 23.5952 4.70376 20.2543C5.10603 18.2608 5.62252 16.2711 6.1406 14.5135C6.44583 13.5408 6.79201 12.5679 7.1629 11.5951C7.21007 11.4674 7.21011 11.3397 7.25728 11.2119C7.11478 11.1697 6.97227 11.2552 6.87736 11.2979C6.35555 11.5544 5.78608 11.8108 5.21686 12.1099C4.60014 12.4091 4.03079 12.7506 3.41411 13.0498C3.22436 13.1353 3.08202 13.2633 2.9873 13.3912C2.32406 14.2865 -0.667443 13.9941 0.135954 12.0342C0.467231 11.4376 1.0362 11.0958 1.60527 10.7115C1.88975 10.5408 2.07964 10.37 2.12649 9.98699C2.17286 9.39089 2.55176 8.92175 3.12075 8.53749C4.30643 7.76893 5.54021 7.21284 6.86882 6.69943C7.40106 6.47952 7.93344 6.26889 8.46568 6.05888C9.18027 1.57824 10.2326 0.00294331 11.7785 1.21078e-06Z" fill="white"/>
                  <path d="M3.19883 25.6114C3.24884 19.9589 5.3484 13.8775 6.39192 11.5433L8.01942 10.0293L5.39005 29.6488H10.7114L13.2782 27.567L12.84 30.4059C11.638 31.6171 8.66636 31.7937 7.33083 31.7306C3.52446 31.7306 2.99018 27.6511 3.19883 25.6114Z" fill="white"/>
                  <path d="M13.0571 26.4866C9.79018 27.8057 8.39438 26.3805 8.39438 24.5052L5.90063 24.2988L5.63184 29.2347L6.00181 31.5219C7.9442 32.3492 10.9754 31.9351 12.6094 31.5254C12.8818 31.4571 13.0755 31.2194 13.1036 30.9379L13.536 26.6131C13.5528 26.4451 13.3791 26.3244 13.2292 26.3999L13.0571 26.4866Z" fill="white"/>
                  <path d="M11.4231 0.0287467C8.95473 0.514458 7.90835 4.35711 7.60059 6.46596L11.1524 5.55643L11.9773 1.09869C12.1619 0.168327 11.6848 -0.00225769 11.4231 0.0287467Z" fill="white"/>
                  <path d="M12.8191 27.4948C12.3514 27.8948 11.1029 28.3028 10.1562 28.4974L10.4226 31.6586C10.8591 31.6187 11.7122 31.3478 12.318 31.1288C12.6339 31.0146 12.8502 30.7262 12.8901 30.3904L13.0704 28.8726C13.2666 27.3496 12.9846 27.3195 12.8191 27.4948Z" fill="white"/>
                </svg>
              </div>

              {/* Desktop logo (hidden on mobile) */}
              <div className="hidden sm:flex items-center" style={{ width: '205.351px', height: '47.759px', flexShrink: 0 }}>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="206"
                  height="48"
                  viewBox="0 0 206 48"
                  fill="none"
                  role="img"
                  aria-label="Tandem logo"
                  className="block w-full h-full"
                >
                  <path d="M158.657 40.0565C157.956 40.2809 157.178 40.3281 156.399 40.3753C149.53 40.819 142.985 41.9313 136.319 43.691C131.9 44.4938 128.018 45.7666 123.516 46.1418C122.412 46.25 121.214 46.3708 120.192 46.0509C116.288 45.3471 114.293 41.1073 115.937 37.585C118.343 32.5943 126.092 29.9886 131.074 28.4303L131.079 28.4378C133.302 27.6782 135.672 26.864 137.99 26.2667C138.093 26.2356 138.243 26.2057 138.385 26.1591C138.46 26.1343 138.533 26.105 138.595 26.0681C138.734 26.0002 138.763 25.9151 138.763 25.857C138.768 25.8282 138.768 25.7971 138.762 25.7632C138.724 25.6423 138.581 25.6446 138.477 25.6452C134.123 26.1516 129.695 26.0618 125.327 25.7557C122.369 25.6003 121.595 21.555 124.059 20.1308C127.99 18.264 140.716 14.0196 146.867 11.7449V11.734L150.483 10.6066C151 10.4455 151.547 10.7395 151.702 11.2609L152.784 14.9023C152.941 15.4306 152.634 15.9859 152.106 16.1297C147.602 17.2392 143.25 18.8389 138.883 20.3926C138.811 20.4386 138.631 20.4916 138.413 20.552C138.413 20.552 138.411 20.5531 138.41 20.5531C138.173 20.6457 137.932 20.7287 137.696 20.7948C137.696 20.7948 137.524 20.8569 137.507 21.025C137.507 21.025 137.425 21.3294 137.937 21.3846C137.937 21.3846 137.941 21.3858 137.949 21.3875L137.951 21.3881C138.259 21.4083 138.569 21.4186 138.871 21.4537C140.589 21.6706 142.311 22.0361 144.047 22.0625C145.592 22.2397 149.664 22.7116 150.835 22.9827C152.111 23.3083 152.842 24.2146 152.862 25.5186C152.885 26.9267 151.825 28.1317 150.448 28.2715C148.678 28.451 146.946 28.7463 145.226 29.202C143.249 29.7579 141.283 30.3535 139.334 31.0003C136.4 31.9727 133.503 33.0615 130.67 34.305C127.815 35.5583 125.057 36.9785 122.385 38.5886C122.303 38.6381 122.221 38.687 122.14 38.7376C122.051 38.8303 121.947 38.9086 121.852 38.9943C121.75 39.0863 121.59 39.2417 121.668 39.3965C121.668 39.3965 121.738 39.614 122.071 39.4437C122.071 39.4437 122.47 39.2958 122.757 39.2066H122.758C123.761 38.7664 124.796 38.4044 125.859 38.1421C136.155 35.5221 145.804 33.3297 156.784 32.7507C161.328 32.3439 163.23 38.4527 158.657 40.0565Z" fill="white"/>
                  <path d="M96.9147 47.0429C92.5621 47.0429 89.1325 45.5618 86.5961 42.6282C84.0307 39.6946 82.7625 35.9479 82.7625 31.3881C82.6184 22.6167 88.095 15.6457 96.7996 15.7332C99.8253 15.7332 102.449 16.4882 104.668 17.9987C106.788 19.4609 108.316 21.3864 109.221 23.775C109.275 23.916 109.408 24.011 109.558 24.011C109.754 24.011 109.914 23.8504 109.914 23.6525V14.6002C109.914 11.2603 109.698 8.33247 109.286 5.7804C109.187 5.17158 109.646 4.60938 110.259 4.60938H117.523C118.135 4.60938 118.595 5.17216 118.496 5.7804C118.084 8.33303 117.869 11.2603 117.869 14.6002V36.2672C117.869 39.6071 118.084 42.535 118.496 45.0876C118.595 45.6964 118.135 46.2586 117.523 46.2586H110.381C109.73 46.2586 109.264 45.6279 109.409 44.9892C109.741 43.5316 109.914 42.0429 109.914 40.537V39.164C109.914 38.9436 109.736 38.7652 109.518 38.7652C109.357 38.7652 109.212 38.8642 109.148 39.0144C108.19 41.2851 106.669 43.1771 104.639 44.6905C102.506 46.2592 99.9403 47.0429 96.9147 47.0429ZM100.229 40.8564C102.91 40.8564 105.187 39.8689 107.032 37.9228C108.876 35.9767 109.251 33.7986 109.251 31.3875C109.251 28.6864 108.905 26.4502 107.089 24.6203C105.273 22.8197 102.996 21.9192 100.229 21.9192C97.318 21.9192 94.9258 22.7904 93.052 24.5622C91.1782 26.334 90.2565 28.6282 90.2565 31.3875C90.2565 34.1467 91.1782 36.4122 93.052 38.184C94.9258 39.9558 97.318 40.8564 100.229 40.8564Z" fill="white"/>
                  <path d="M29.8266 47.0435C25.9931 47.0435 22.9666 46.0848 20.7761 44.168C18.5855 42.28 17.4902 39.8402 17.4902 36.849C17.4902 33.8579 18.5855 31.4174 20.8052 29.5299C22.9958 27.6419 26.0223 26.6839 29.8843 26.6839C32.6802 26.6839 35.0722 27.265 37.0612 28.3975C38.9257 29.4753 40.2425 30.7896 40.9866 32.3404C41.0557 32.4849 41.199 32.5804 41.3583 32.5804C41.5799 32.5804 41.7593 32.3997 41.7593 32.1764V28.4269C41.7593 23.2277 38.1565 20.6141 31.9018 20.6141C29.7113 20.6141 27.5498 20.9047 25.4455 21.4565C24.3885 21.7483 23.4919 22.0475 22.7553 22.3536C22.0124 22.6626 21.0359 22.1229 21.0359 21.3133V18.4338C21.0359 18.0315 21.2792 17.6678 21.6572 17.5395C22.8632 17.1298 24.505 16.7414 26.599 16.3731C29.078 15.9375 31.3839 15.7344 33.4876 15.7344C38.0126 15.7344 41.6159 16.4605 44.6419 18.1161C47.6393 19.7717 49.369 22.8503 49.369 27.0326V36.7333C49.369 39.3476 49.4267 41.3512 49.5706 42.7168C49.638 43.5155 49.7448 44.2544 49.8916 44.9276C50.0349 45.5876 49.5592 46.2598 48.8882 46.2598H42.5918C41.874 46.2598 41.3687 45.4818 41.5103 44.7728C41.6782 43.9315 41.7593 42.917 41.7593 41.7287V41.5394C41.7593 41.3553 41.6114 41.2057 41.4281 41.2057C41.2967 41.2057 41.1779 41.2845 41.122 41.4042C39.5567 44.7527 35.5645 47.0435 29.8266 47.0435ZM31.3759 42.0475C36.593 42.0475 39.8788 40.0726 39.8788 36.7903C39.8788 35.4541 39.0719 34.2342 37.4866 33.1599C35.9014 32.0849 33.8548 31.5624 31.3764 31.5624C26.3815 31.5624 25.2731 33.5517 24.7883 36.3403C24.7791 36.3944 24.774 36.4502 24.7745 36.5055C24.778 37.951 24.8802 38.5339 25.7562 40.2452C25.7944 40.32 25.8424 40.3902 25.9001 40.4507C27.0108 41.6004 28.9329 42.0475 31.3759 42.0475Z" fill="white"/>
                  <path d="M59.3957 44.9466C59.519 45.6026 59.0382 46.2598 58.3758 46.2598H52.2262C51.6134 46.2598 51.1537 45.6958 51.2525 45.0859C51.6066 42.8974 51.7916 40.5042 51.7916 37.9239L51.6825 25.5508C51.6825 22.57 51.497 19.9443 51.1406 17.692C51.0447 17.0821 51.5044 16.5181 52.1171 16.5181H58.2513C58.9469 16.5181 59.4294 17.2391 59.2632 17.9193C58.9651 19.1393 58.8115 20.6182 58.8115 22.3565V23.752C58.8115 23.9275 58.9525 24.0702 59.1267 24.0702C59.262 24.0702 59.3825 23.9816 59.4276 23.8527C61.2385 18.6449 64.9544 15.7344 70.2535 15.7344C73.9466 15.7344 76.8393 16.8668 78.8801 19.1617C80.9209 21.456 81.928 24.7383 81.928 28.95V36.8501C81.928 40.0565 82.1142 42.8019 82.4706 45.0864C82.5658 45.6964 82.1062 46.2603 81.4938 46.2603H75.19C74.5745 46.2603 74.1143 45.6918 74.217 45.0807C74.6104 42.7398 74.7991 40.232 74.7991 37.5764V30.8673C74.7991 25.32 72.0097 22.2414 67.3348 22.2414C64.9327 22.2414 62.8919 23.2001 61.2647 25.1169C59.6378 27.0631 58.92 29.2411 58.92 31.681V37.635C58.92 40.8023 59.0747 43.2399 59.3957 44.9477V44.9466Z" fill="white"/>
                  <path d="M165.078 43.385C165.191 44.0323 164.714 44.6711 164.061 44.6711H158.566C157.959 44.6711 157.501 44.1175 157.591 43.5133C157.918 41.3203 158.089 38.9219 158.089 36.3352V23.9622C158.089 20.9744 157.917 18.3435 157.589 16.0872C157.501 15.4824 157.959 14.9289 158.566 14.9289H164.049C164.732 14.9289 165.212 15.6251 165.059 16.2956C164.78 17.5218 164.636 19.0122 164.636 20.7667V22.1921C164.636 22.3515 164.764 22.4804 164.923 22.4804C165.048 22.4804 165.16 22.3958 165.198 22.2749C166.9 16.8641 170.152 14.1445 174.908 14.1445C179.664 14.1445 183.009 16.8595 184.276 22.2605C184.305 22.3877 184.418 22.4804 184.548 22.4804C184.669 22.4804 184.777 22.3992 184.814 22.2818C186.458 17.0902 190.105 14.1445 195.048 14.1445C201.69 14.1445 205.059 18.9949 205.059 27.3596V35.2597C205.059 38.4736 205.231 41.2242 205.559 43.5121C205.647 44.1169 205.188 44.6705 204.582 44.6705H198.948C198.339 44.6705 197.88 44.1129 197.974 43.5069C198.337 41.1615 198.511 38.6485 198.511 35.9865V29.2775C198.511 23.8459 196.447 20.651 192.296 20.651C190.209 20.651 188.453 21.5804 187.053 23.4391C185.63 25.3271 184.895 27.447 184.847 29.8V35.6959C184.847 38.4391 185.025 41.0515 185.367 43.5334C185.448 44.1313 184.993 44.6711 184.394 44.6711H178.947C178.347 44.6711 177.89 44.129 177.961 43.5288C178.186 41.6 178.3 39.0807 178.3 35.9871V29.2781C178.3 23.8465 176.236 20.6516 172.085 20.6516C167.625 20.5935 164.517 25.4732 164.636 30.0911V36.0452C164.636 39.2297 164.78 41.6753 165.078 43.385Z" fill="white"/>
                  <path d="M12.7428 38.9604C12.6411 29.7595 16.4206 18.5138 18.3231 14.041H15.0889L9.77734 31.845V44.947L18.5597 46.6138C20.0504 46.3434 20.1498 41.9696 20.0131 39.8165L19.5372 40.0128C14.6329 43.0485 12.9642 40.576 12.7428 38.9604Z" fill="white"/>
                  <path d="M17.7978 0.140627C19.7081 0.137405 18.8068 4.44415 18.1957 7.13704C19.345 6.7253 20.4913 6.32465 21.6604 5.92454C22.8644 5.54103 24.0682 5.09343 25.2013 4.71006C26.0512 4.39075 26.9726 4.13484 27.9648 4.19652C29.6657 4.25709 31.0856 5.52546 31.1594 7.11379C31.2324 8.32083 30.3838 9.52999 29.0385 10.1044C25.8518 11.3813 22.6645 12.4676 19.4776 13.6174C18.7694 13.8729 18.1321 14.1921 17.4238 14.384C17.1406 14.5116 16.9993 14.7024 16.9289 14.9566C16.2778 16.9145 15.6688 18.8725 15.1341 20.8304C11.9405 30.5578 8.77634 43.9754 15.7502 42.5847C15.9961 42.5656 16.241 42.5369 16.4835 42.4969C17.2363 42.4796 18.9313 41.6953 19.4562 41.4338C19.6084 41.6103 19.5292 42.0441 19.5332 42.2647C19.5477 43.2163 19.456 44.1665 19.3362 45.1116L19.3332 45.1354C19.2901 45.4821 19.2372 45.8976 19.0428 46.2238L19.0199 46.2354C14.8768 48.229 11.5323 47.8639 9.38035 47.1046C7.88986 46.5787 6.7675 45.3209 6.43449 43.7657C5.70457 40.3551 6.23295 35.3562 7.23901 30.37C7.83938 27.3947 8.61024 24.4251 9.38345 21.8018C9.839 20.3502 10.3557 18.8981 10.9092 17.4463C10.9796 17.2556 10.9797 17.065 11.0501 16.8744C10.8374 16.8113 10.6247 16.9389 10.483 17.0027C9.70426 17.3854 8.85434 17.7682 8.00479 18.2146C7.08435 18.6611 6.23462 19.1708 5.31423 19.6173C5.03103 19.745 4.8186 19.936 4.67723 20.1269C3.68736 21.463 -0.777393 21.0267 0.421658 18.1016C0.916081 17.2112 1.76526 16.7009 2.61457 16.1275C3.03916 15.8727 3.32256 15.6178 3.39248 15.0461C3.46169 14.1564 4.02719 13.4563 4.8764 12.8828C6.646 11.7357 8.48738 10.9057 10.4703 10.1395C11.2647 9.81126 12.0592 9.49689 12.8536 9.18346C13.9201 2.49614 15.4907 0.145018 17.7978 0.140627Z" fill="white"/>
                  <path d="M4.99229 38.3655C5.06694 29.9293 8.20047 20.8527 9.7579 17.369L12.1869 15.1094L8.26264 44.3914H16.2047L20.0355 41.2843L19.3814 45.5212C17.5875 47.329 13.1524 47.5926 11.1592 47.4985C5.47829 47.4985 4.68089 41.4098 4.99229 38.3655Z" fill="white"/>
                  <path d="M19.7041 39.6715C14.8283 41.6402 12.7451 39.5131 12.7451 36.7142L9.02324 36.4062L8.62207 43.773L9.17425 47.1867C12.0732 48.4214 16.5972 47.8033 19.036 47.1918C19.4425 47.0899 19.7315 46.7352 19.7735 46.3151L20.4188 39.8603C20.4439 39.6095 20.1847 39.4294 19.961 39.5421L19.7041 39.6715Z" fill="white"/>
                  <path d="M17.2656 0.184696C13.5816 0.909616 12.0199 6.64475 11.5605 9.79218L16.8615 8.43471L18.0927 1.78158C18.3683 0.393018 17.6561 0.138423 17.2656 0.184696Z" fill="white"/>
                  <path d="M19.3511 41.1773C18.6532 41.7741 16.7898 42.3832 15.377 42.6736L15.7745 47.3917C16.426 47.332 17.6991 46.9278 18.6034 46.6009C19.0748 46.4304 19.3975 46.0001 19.4571 45.4989L19.7263 43.2336C20.0191 40.9604 19.5982 40.9156 19.3511 41.1773Z" fill="white"/>
                </svg>
              </div>
            </div>
          </div>
          
          {/* Desktop navigation (hidden on mobile) */}
          <div className="hidden sm:flex flex-shrink-0 ml-auto min-w-0">
            <div className="inline-flex items-center min-w-0" style={{ gap: 'clamp(12px, 2.5vw, 32px)' }}>
              <div 
                onClick={() => scrollToSection('features')}
                className="relative w-fit [font-family:'Anek_Latin-Bold',Helvetica] font-bold text-white tracking-[0] whitespace-nowrap cursor-pointer hover:text-gray-300 transition-colors"
                style={{ fontSize: 'clamp(12px, 1.6vw, 18px)', lineHeight: 1.6 }}
              >
                Features
              </div>

              <div 
                onClick={() => scrollToSection('blogs')}
                className="relative w-fit [font-family:'Anek_Latin-Bold',Helvetica] font-bold text-white tracking-[0] whitespace-nowrap cursor-pointer hover:text-gray-300 transition-colors"
                style={{ fontSize: 'clamp(12px, 1.6vw, 18px)', lineHeight: 1.6 }}
              >
                Blogs
              </div>

              <div 
                onClick={() => scrollToSection('faq')}
                className="relative w-fit [font-family:'Anek_Latin-Bold',Helvetica] font-bold text-white tracking-[0] whitespace-nowrap cursor-pointer hover:text-gray-300 transition-colors"
                style={{ fontSize: 'clamp(12px, 1.6vw, 18px)', lineHeight: 1.6 }}
              >
                FAQ
              </div>

              {/* Exact Figma Button CSS */}
              <div className="flex items-center justify-end relative">
                <button
                  onClick={handleJoinNow}
                  className="flex justify-center items-center text-black font-bold hover:bg-gray-50 hover:scale-105 transition-all duration-300 ease-in-out cursor-pointer shadow-lg hover:shadow-xl bg-white relative overflow-hidden whitespace-nowrap"
                  style={{ 
                    borderRadius: '24px',
                    padding: 'clamp(6px, 0.8vw, 10px) clamp(12px, 1.6vw, 16px)'
                  }}
                >
                  <div className="font-bold tracking-[0] !ml-[unset]" style={{ fontSize: 'clamp(12px, 1.6vw, 18px)', lineHeight: 1.6 }}>
                    Join now
                  </div>
                  <div 
                    className="absolute bottom-0 left-0 right-0 h-[3px]"
                    style={{
                      background: 'linear-gradient(90deg, rgba(193, 245, 70, 1) 0%, rgba(0, 255, 200, 1) 50%, rgba(131, 73, 255, 1) 100%)',
                      borderRadius: '0 0 24px 24px'
                    }}
                  ></div>
                </button>
              </div>
            </div>
          </div>

          {/* Mobile hamburger (hidden on desktop) */}
          <div className="ml-auto pr-[16px] xxs:pr-[16px] xs:pr-[16px] sm:hidden">
            <button
              aria-expanded={isMenuOpen}
              type="button"
              aria-label={isMenuOpen ? 'Close menu' : 'Open menu'}
              onClick={() => setIsMenuOpen((v) => !v)}
              className="navbar-toggle p-2 focus:outline-none focus:ring-0 bg-transparent border-0 shadow-none rounded-none appearance-none"
              style={{ backgroundColor: 'transparent', border: 'none', borderRadius: 0, boxShadow: 'none', outline: 'none' }}
            >
              {isMenuOpen ? (
                // Close icon (X)
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="white" strokeWidth="2" className="w-6 h-6 transition-opacity duration-150 hover:opacity-80 active:opacity-70">
                  <path strokeLinecap="round" strokeLinejoin="round" d="M6 6l12 12M18 6l-12 12" />
                </svg>
              ) : (
                // Pure CSS hamburger (three bars)
                <span className="block w-6 h-5 relative transition-opacity duration-150 hover:opacity-80 active:opacity-70" aria-hidden="true">
                  <span className="absolute left-0 top-0 block h-[2px] w-6 bg-white rounded"></span>
                  <span className="absolute left-0 top-1/2 -translate-y-1/2 block h-[2px] w-6 bg-white rounded"></span>
                  <span className="absolute left-0 bottom-0 block h-[2px] w-6 bg-white rounded"></span>
                </span>
              )}
            </button>
          </div>
        </div>
      </header>

      {/* Mobile full-screen menu overlay */}
      {isMenuOpen && (
        <div className="sm:hidden fixed inset-0 z-[60] bg-black" style={{ background: 'rgba(0,0,0,0.96)' }}>
          <div className="flex items-start justify-between px-6 pt-6">
            <button
              type="button"
              aria-label="Close menu"
              onClick={() => setIsMenuOpen(false)}
              className="navbar-toggle p-2 -ml-2 focus:outline-none focus:ring-0 bg-transparent border-0 shadow-none rounded-none appearance-none"
              style={{ backgroundColor: 'transparent', border: 'none', borderRadius: 0, boxShadow: 'none', outline: 'none' }}
            >
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="white" strokeWidth="2" className="w-7 h-7 transition-opacity duration-150 hover:opacity-80 active:opacity-70">
                <path strokeLinecap="round" strokeLinejoin="round" d="M6 6l12 12M18 6l-12 12" />
              </svg>
            </button>
          </div>

          <nav className="mt-6 pr-6 pl-5 xxs:pl-6 xs:pl-[29px] space-y-6">
            <div
              onClick={() => { scrollToSection('features'); setIsMenuOpen(false) }}
              className="text-white font-bold text-2xl cursor-pointer hover:text-gray-300 focus:text-gray-300 active:text-gray-300 transition-colors"
            >
              Features
            </div>
            <div
              onClick={() => { scrollToSection('blogs'); setIsMenuOpen(false) }}
              className="text-white font-bold text-2xl cursor-pointer hover:text-gray-300 focus:text-gray-300 active:text-gray-300 transition-colors"
            >
              Blogs
            </div>
            <div
              onClick={() => { scrollToSection('faq'); setIsMenuOpen(false) }}
              className="text-white font-bold text-2xl cursor-pointer hover:text-gray-300 focus:text-gray-300 active:text-gray-300 transition-colors"
            >
              FAQ
            </div>

            {/* Join now button */}
            <div className="pt-2">
              <button
                onClick={handleJoinNow}
                className="flex items-center justify-center gap-2.5 text-black font-bold bg-white rounded-[24px] border-b-2 border-[#C1F546] px-4 py-2 grow shrink-0 basis-0"
              >
                Join now
              </button>
            </div>
          </nav>
        </div>
      )}

      {/* Ellipse 7 top curve under navbar */}
      <div className="relative w-full pointer-events-none" style={{ zIndex: 45, height: '0px' }}>
        {/* Tablet only (md to <lg): raised closer to navbar */}
        <div
          className="absolute hidden md:block lg:hidden"
          style={{
            width: 'calc(100% - 4px)',
            height: 'clamp(200px, 45vw, 300px)',
            top: 'calc(clamp(200px, 45vw, 300px) / -2 + 8px)',
            left: '2px',
          }}
        >
          <img
            src={Ellipse7}
            alt="navbar top curve"
            className="block w-full h-full"
            style={{ transform: 'scaleX(1.012)', transformOrigin: 'center top' }}
          />
        </div>
        {/* Desktop only (lg+): original position retained */}
        <div
          className="absolute hidden lg:block"
          style={{
            width: 'calc(100% - 4px)',
            height: 'clamp(200px, 45vw, 300px)',
            top: 'calc(clamp(200px, 45vw, 300px) / -2 + 36px)',
            left: '2px',
          }}
        >
          <img
            src={Ellipse7}
            alt="navbar top curve"
            className="block w-full h-full"
            style={{ transform: 'scaleX(1.012)', transformOrigin: 'center top' }}
          />
        </div>
      </div>

  {/* Spacer not needed now; let next section touch navbar bottom */}
  <div className="h-0"></div>
    </>
  )
}

export default Navbar


